homicides <- csv_to_disk.frame(file , outdir = file.path(tempdir(), name))
list(name = name, homicides = homicides)
})
library(readr)
library(ggplot2)
library(disk.frame)
library(dplyr)
library(purrr)
homicide_route <- "../Homicidio.csv/"
#Analizar los nucleos para poder usar disk.frame
setup_disk.frame(workers = parallel::detectCores(logical=FALSE))
#Lista de archivos
files <- list.files(homicide_route, pattern = "*.csv", full.names = TRUE)
homicide_list <- lapply(files , function(file){
name <- basename(file)
#convertir cada archivo en disk.frame
homicides <- csv_to_disk.frame(file , outdir = file.path(tempdir(), name))
list(name = name, homicides = homicides)
})
#probando como funcionan los data frames
homicide1 <- homicide_list[[100]]$homicides
homicide1df <- homicide1 %>% collect
View(homicide1df)
#aplicando las funciones de dplyr para un data frame
homicides_per_year <- homicide1%>%
group_by(yy_hecho) %>%
summarise(n=n()) %>%
collect()
View(homicides_per_year)
#para hacer un conteo acumulativo
accumulative_list <- list()
for(i in 1:100){
homicide_variable <- homicide_list[[i]]$homicides
datf_variable <- homicide_variable%>%
group_by(yy_hecho) %>%
summarise(n=n()) %>%
collect()
accumulative_list <- append(accumulative_list,list(datf_variable))
}
View(accumulative_list[[1]])
library(readr)
library(ggplot2)
library(disk.frame)
library(dplyr)
library(purrr)
library(readr)
library(ggplot2)
library(disk.frame)
library(dplyr)
library(purrr)
ggplot(homicides_per_year, aes(x = yy_hecho, y = n)) +
geom_line(color = "blue") +
geom_point(color = "red") +
labs(title = "Tendencia de Homicidios por Año",
x = "Año",
y = "Número de Homicidios") +
theme_minimal() +
scale_y_continuous(limits = c(0, max(homicides_per_year$n) + 1000), breaks = seq(0, max(homicides_per_year$n) + 1000, by = 1000)) +
scale_x_continuous(breaks = seq(min(homicides_per_year$yy_hecho), max(homicides_per_year$yy_hecho), by = 1))
library(readr)
library(ggplot2)
library(disk.frame)
library(dplyr)
library(purrr)
homicide_route <- "../Homicidio.csv/verdata-homicidio-R99.csv"
kidnapping_route <- "../Secuestro.csv/verdata-secuestro-R99.csv"
disappearances_route <- "../Desaparicion.csv/verdata-desaparicion-R99.csv"
recruitment_route <-"../Reclutamiento.csv/verdata-reclutamiento-R99.csv"
homicide1df <-read.csv(homicide_route)
library(readr)
library(ggplot2)
library(disk.frame)
library(dplyr)
library(purrr)
homicide_route <- "../Homicidio.csv/verdata-homicidio-R99.csv"
kidnapping_route <- "../Secuestro.csv/verdata-secuestro-R99.csv"
disappearances_route <- "../Desaparicion.csv/verdata-desaparicion-R99.csv"
recruitment_route <-"../Reclutamiento.csv/verdata-reclutamiento-R99.csv"
homicide1df <-read.csv(homicide_route)
library(readr)
library(ggplot2)
library(disk.frame)
library(dplyr)
library(purrr)
homicide_route <- "../Homicidio.csv/verdata-homicidio-R99.csv"
kidnapping_route <- "../Secuestro.csv/verdata-secuestro-R99.csv"
disappearances_route <- "../Desaparicion.csv/verdata-desaparicion-R99.csv"
recruitment_route <-"../Reclutamiento.csv/verdata-reclutamiento-R99.csv"
homicide1df <-read.csv(homicide_route)
kidnapping1df <-read.csv(kidnapping_route)
recruitment1df <-read.csv(recruitment_route)
disappearance1df <-read.csv(disappearances_route)
#exploracion de datos
print(any(is.na(homicide1df)))
print(all(apply(homicide1df,2,function(x) all(!is.nan(x)))))
print(all(apply(kidnapping1df,2,function(x) all(!is.nan(x)))))
print(any(is.na(kidnapping1df)))
print(any(is.na(recruitment1df)))
print(all(apply(recruitment1df,2,function(x) all(!is.nan(x)))))
print(all(apply(disappearance1df,2,function(x) all(!is.nan(x)))))
print(any(is.na(disappearance1df)))
homicide1df <- homicide1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
View(homicide1df)
library(readr)
library(ggplot2)
library(disk.frame)
library(dplyr)
library(purrr)
homicide1df <- homicide1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
disappearance1df <- disappearance1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
kidnapping1df <- kidnapping1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
recruitment1df <- recruitment1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
View(homicide1df)
homicide1f <-homicide1df[,-c(1:36)]
homicide1df <-homicide1df[,-c(1:36)]
rm(homicide1f)
View(homicide1df)
library(sf)
library(tmap)
library(readr)
library(ggplot2)
library(disk.frame)
library(dplyr)
library(purrr)
map <- st_read("MGN2022_MPIO_POLITICO/MGN_MPIO_POLITICO.shp")
map2 <- map[,1]
plot(map2)
View(disappearance1df)
View(map2)
View(map2)
View(map)
map <- st_read("MGN2022_MPIO_POLITICO/MGN_MPIO_POLITICO.shp")
map2 <- map[,2]
plot(map2)
View(map2)
View(homicide1df)
homicide1df$muni_code_hecho <- substr(homicide1df$muni_code_hecho, nchar(homicide1df$muni_code_hecho) - 2, nchar(homicide1df$muni_code_hecho))
library(readr)
library(ggplot2)
library(disk.frame)
library(dplyr)
library(purrr)
homicide_route <- "../Homicidio.csv/verdata-homicidio-R99.csv"
kidnapping_route <- "../Secuestro.csv/verdata-secuestro-R99.csv"
disappearances_route <- "../Desaparicion.csv/verdata-desaparicion-R99.csv"
recruitment_route <-"../Reclutamiento.csv/verdata-reclutamiento-R99.csv"
homicide1df <-read.csv(homicide_route)
kidnapping1df <-read.csv(kidnapping_route)
recruitment1df <-read.csv(recruitment_route)
disappearance1df <-read.csv(disappearances_route)
#exploracion de datos
print(any(is.na(homicide1df)))
print(all(apply(homicide1df,2,function(x) all(!is.nan(x)))))
print(all(apply(kidnapping1df,2,function(x) all(!is.nan(x)))))
print(any(is.na(kidnapping1df)))
print(any(is.na(recruitment1df)))
print(all(apply(recruitment1df,2,function(x) all(!is.nan(x)))))
print(all(apply(disappearance1df,2,function(x) all(!is.nan(x)))))
print(any(is.na(disappearance1df)))
View(homicide1df)
#volver caracter la columna de departamentos y municipios y concatenar un cero a la izquierda para poder luego usar map
#quitar columnas no deseadas
homicide1df <- homicide1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
homicide1df <-homicide1df[,-c(1:36)]
homicide1df$muni_code_hecho <- substr(homicide1df$muni_code_hecho, nchar(homicide1df$muni_code_hecho) - 2, nchar(homicide1df$muni_code_hecho))
View(homicide1df)
#disappearance
disappearance1df <- disappearance1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
disappearance1df <-disappearance1df[,-c(1:36)]
disappearance1df$muni_code_hecho <- substr(disappearance1df$muni_code_hecho, nchar(disappearance1df$muni_code_hecho) - 2, nchar(disappearance1df$muni_code_hecho))
#kidnapping
kidnapping1df <- kidnapping1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
kidnapping1df <kidnapping1df[,-c(1:36)]
library(readr)
library(ggplot2)
library(disk.frame)
library(dplyr)
library(purrr)
homicide_route <- "../Homicidio.csv/verdata-homicidio-R99.csv"
kidnapping_route <- "../Secuestro.csv/verdata-secuestro-R99.csv"
disappearances_route <- "../Desaparicion.csv/verdata-desaparicion-R99.csv"
recruitment_route <-"../Reclutamiento.csv/verdata-reclutamiento-R99.csv"
homicide1df <-read.csv(homicide_route)
kidnapping1df <-read.csv(kidnapping_route)
recruitment1df <-read.csv(recruitment_route)
disappearance1df <-read.csv(disappearances_route)
#exploracion de datos
print(any(is.na(homicide1df)))
print(all(apply(homicide1df,2,function(x) all(!is.nan(x)))))
print(all(apply(kidnapping1df,2,function(x) all(!is.nan(x)))))
print(any(is.na(kidnapping1df)))
print(any(is.na(recruitment1df)))
print(all(apply(recruitment1df,2,function(x) all(!is.nan(x)))))
print(all(apply(disappearance1df,2,function(x) all(!is.nan(x)))))
print(any(is.na(disappearance1df)))
#homicide
homicide1df <- homicide1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
homicide1df <-homicide1df[,-c(1:36)]
homicide1df$muni_code_hecho <- substr(homicide1df$muni_code_hecho, nchar(homicide1df$muni_code_hecho) - 2, nchar(homicide1df$muni_code_hecho))
#disappearance
disappearance1df <- disappearance1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
disappearance1df <-disappearance1df[,-c(1:36)]
disappearance1df$muni_code_hecho <- substr(disappearance1df$muni_code_hecho, nchar(disappearance1df$muni_code_hecho) - 2, nchar(disappearance1df$muni_code_hecho))
#kidnapping
kidnapping1df <- kidnapping1df %>% mu-tate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
library(readr)
library(ggplot2)
library(disk.frame)
library(dplyr)
library(purrr)
homicide_route <- "../Homicidio.csv/verdata-homicidio-R99.csv"
kidnapping_route <- "../Secuestro.csv/verdata-secuestro-R99.csv"
disappearances_route <- "../Desaparicion.csv/verdata-desaparicion-R99.csv"
recruitment_route <-"../Reclutamiento.csv/verdata-reclutamiento-R99.csv"
homicide1df <-read.csv(homicide_route)
kidnapping1df <-read.csv(kidnapping_route)
recruitment1df <-read.csv(recruitment_route)
disappearance1df <-read.csv(disappearances_route)
#exploracion de datos
print(any(is.na(homicide1df)))
print(all(apply(homicide1df,2,function(x) all(!is.nan(x)))))
print(all(apply(kidnapping1df,2,function(x) all(!is.nan(x)))))
print(any(is.na(kidnapping1df)))
print(any(is.na(recruitment1df)))
print(all(apply(recruitment1df,2,function(x) all(!is.nan(x)))))
print(all(apply(disappearance1df,2,function(x) all(!is.nan(x)))))
print(any(is.na(disappearance1df)))
#homicide
homicide1df <- homicide1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
homicide1df <-homicide1df[,-c(1:36)]
homicide1df$muni_code_hecho <- substr(homicide1df$muni_code_hecho, nchar(homicide1df$muni_code_hecho) - 2, nchar(homicide1df$muni_code_hecho))
#disappearance
disappearance1df <- disappearance1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
disappearance1df <-disappearance1df[,-c(1:36)]
disappearance1df$muni_code_hecho <- substr(disappearance1df$muni_code_hecho, nchar(disappearance1df$muni_code_hecho) - 2, nchar(disappearance1df$muni_code_hecho))
#kidnapping
kidnapping1df <- kidnapping1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
kidnapping1df <kidnapping1df[,-c(1:36)]
library(readr)
library(ggplot2)
library(disk.frame)
library(dplyr)
library(purrr)
homicide_route <- "../Homicidio.csv/verdata-homicidio-R99.csv"
kidnapping_route <- "../Secuestro.csv/verdata-secuestro-R99.csv"
disappearances_route <- "../Desaparicion.csv/verdata-desaparicion-R99.csv"
recruitment_route <-"../Reclutamiento.csv/verdata-reclutamiento-R99.csv"
homicide1df <-read.csv(homicide_route)
kidnapping1df <-read.csv(kidnapping_route)
recruitment1df <-read.csv(recruitment_route)
disappearance1df <-read.csv(disappearances_route)
#exploracion de datos
print(any(is.na(homicide1df)))
print(all(apply(homicide1df,2,function(x) all(!is.nan(x)))))
print(all(apply(kidnapping1df,2,function(x) all(!is.nan(x)))))
print(any(is.na(kidnapping1df)))
print(any(is.na(recruitment1df)))
print(all(apply(recruitment1df,2,function(x) all(!is.nan(x)))))
print(all(apply(disappearance1df,2,function(x) all(!is.nan(x)))))
print(any(is.na(disappearance1df)))
#homicide
homicide1df <- homicide1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
homicide1df <-homicide1df[,-c(1:36)]
homicide1df$muni_code_hecho <- substr(homicide1df$muni_code_hecho, nchar(homicide1df$muni_code_hecho) - 2, nchar(homicide1df$muni_code_hecho))
#disappearance
disappearance1df <- disappearance1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
disappearance1df <-disappearance1df[,-c(1:36)]
disappearance1df$muni_code_hecho <- substr(disappearance1df$muni_code_hecho, nchar(disappearance1df$muni_code_hecho) - 2, nchar(disappearance1df$muni_code_hecho))
#kidnapping
kidnapping1df <- kidnapping1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
kidnapping1df <-kidnapping1df[,-c(1:36)]
kidnapping1df$muni_code_hecho <- substr(kidnapping1df$muni_code_hecho, nchar(kidnapping1df$muni_code_hecho) - 2, nchar(kidnapping1df$muni_code_hecho))
#recruitment
recruitment1df <- recruitment1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
recruitment1df <-recruitment1df[,-c(1:36)]
recruitment1df$muni_code_hecho <- substr(recruitment1df$muni_code_hecho, nchar(recruitment1df$muni_code_hecho) - 2, nchar(recruitment1df$muni_code_hecho))
View(disappearance1df)
View(homicide1df)
valores_comunes <- homicide1df$match_group_id %in% kidnapping1df$match_group_id
valores_comunes2 <- intersect(homicide1df$match_group_id, kidnapping1df$match_group_id)
print(any(valores_comunes))
print(valores_comunes2)
library(readr)
library(ggplot2)
library(disk.frame)
library(dplyr)
library(purrr)
homicide_route <- "../Homicidio.csv/verdata-homicidio-R99.csv"
kidnapping_route <- "../Secuestro.csv/verdata-secuestro-R99.csv"
disappearances_route <- "../Desaparicion.csv/verdata-desaparicion-R99.csv"
recruitment_route <-"../Reclutamiento.csv/verdata-reclutamiento-R99.csv"
homicide1df <-read.csv(homicide_route)
kidnapping1df <-read.csv(kidnapping_route)
recruitment1df <-read.csv(recruitment_route)
disappearance1df <-read.csv(disappearances_route)
#exploracion de datos
print(any(is.na(homicide1df)))
print(all(apply(homicide1df,2,function(x) all(!is.nan(x)))))
print(all(apply(kidnapping1df,2,function(x) all(!is.nan(x)))))
print(any(is.na(kidnapping1df)))
print(any(is.na(recruitment1df)))
print(all(apply(recruitment1df,2,function(x) all(!is.nan(x)))))
print(all(apply(disappearance1df,2,function(x) all(!is.nan(x)))))
print(any(is.na(disappearance1df)))
valores_comunes <- homicide1df$match_group_id %in% kidnapping1df$match_group_id
valores_comunes2 <- intersect(homicide1df$match_group_id, kidnapping1df$match_group_id)
print(any(valores_comunes))
print(valores_comunes2)
fila_deseada <- filter(homicide1df,match_group_id="af42ca884de6db37305fa0ed47cb82a50f523aea")
fila_deseada <- filter(homicide1df,match_group_id=="af42ca884de6db37305fa0ed47cb82a50f523aea")
View(fila_deseada)
fila_deseada2 <- filter(kidnapping1df,match_group_id=="af42ca884de6db37305fa0ed47cb82a50f523aea")
View(fila_deseada2)
numero_fila <- which(filter(dkidnapping1df,match_group_id=="af42ca884de6db37305fa0ed47cb82a50f523aea")$match_group_id=="af42ca884de6db37305fa0ed47cb82a50f523aea")
numero_fila <- which(filter(kidnapping1df,match_group_id=="af42ca884de6db37305fa0ed47cb82a50f523aea")$match_group_id=="af42ca884de6db37305fa0ed47cb82a50f523aea")
numero_fila <- which(filter(homicide1df,match_group_id=="af42ca884de6db37305fa0ed47cb82a50f523aea")$match_group_id=="af42ca884de6db37305fa0ed47cb82a50f523aea")
numero_fila <- which(homicide1df$match_group_id == "af42ca884de6db37305fa0ed47cb82a50f523aea", arr.ind = TRUE)[1, "row"]
numero_fila <- match("af42ca884de6db37305fa0ed47cb82a50f523aea", homicide1df$match_group_id)
# Ver el número de fila original
print(numero_fila)
numero_fila2 <- match("af42ca884de6db37305fa0ed47cb82a50f523aea", kidnapping1df$match_group_id)
# Ver el número de fila original
print(numero_fila2)
View(kidnapping1df)
library(readr)
library(ggplot2)
library(disk.frame)
library(dplyr)
library(purrr)
homicide_route <- "../Homicidio.csv/verdata-homicidio-R99.csv"
kidnapping_route <- "../Secuestro.csv/verdata-secuestro-R99.csv"
disappearances_route <- "../Desaparicion.csv/verdata-desaparicion-R99.csv"
recruitment_route <-"../Reclutamiento.csv/verdata-reclutamiento-R99.csv"
homicide1df <-read.csv(homicide_route)
kidnapping1df <-read.csv(kidnapping_route)
recruitment1df <-read.csv(recruitment_route)
disappearance1df <-read.csv(disappearances_route)
#exploracion de datos
print(any(is.na(homicide1df)))
print(all(apply(homicide1df,2,function(x) all(!is.nan(x)))))
print(all(apply(kidnapping1df,2,function(x) all(!is.nan(x)))))
print(any(is.na(kidnapping1df)))
print(any(is.na(recruitment1df)))
print(all(apply(recruitment1df,2,function(x) all(!is.nan(x)))))
print(all(apply(disappearance1df,2,function(x) all(!is.nan(x)))))
print(any(is.na(disappearance1df)))
#volver caracter la columna de departamentos y municipios y concatenar un cero a la izquierda para poder luego usar map
#quitar columnas no deseadas
#homicide
homicide1df <- homicide1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
homicide1df <-homicide1df[,-c(3:36,1,51)]
homicide1df$muni_code_hecho <- substr(homicide1df$muni_code_hecho, nchar(homicide1df$muni_code_hecho) - 2, nchar(homicide1df$muni_code_hecho))
#disappearance
disappearance1df <- disappearance1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
disappearance1df <-disappearance1df[,-c(3:36,1,53)]
disappearance1df$muni_code_hecho <- substr(disappearance1df$muni_code_hecho, nchar(disappearance1df$muni_code_hecho) - 2, nchar(disappearance1df$muni_code_hecho))
#kidnapping
kidnapping1df <- kidnapping1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
kidnapping1df <-kidnapping1df[,-c(3:36,1,51)]
kidnapping1df$muni_code_hecho <- substr(kidnapping1df$muni_code_hecho, nchar(kidnapping1df$muni_code_hecho) - 2, nchar(kidnapping1df$muni_code_hecho))
#recruitment
recruitment1df <- recruitment1df %>% mutate(
dept_code_hecho = ifelse(dept_code_hecho < 10 , sprintf("%02d", dept_code_hecho) %>% as.character(), as.character(dept_code_hecho)),
muni_code_hecho = ifelse(muni_code_hecho < 10 , sprintf("%02d", muni_code_hecho) %>% as.character(), as.character(muni_code_hecho))
)
recruitment1df <-recruitment1df[,-c(3:36,1,51)]
recruitment1df$muni_code_hecho <- substr(recruitment1df$muni_code_hecho, nchar(recruitment1df$muni_code_hecho) - 2, nchar(recruitment1df$muni_code_hecho))
#aplicando las funciones de dplyr para un data frame
#datos por municipio
homicides_group_year_mun <- homicide1df %>%
group_by(yy_hecho,muni_code_hecho, dept_code_hecho) %>%
summarise(n=n())
# datos por año
disappearance_per_year <- disappearance1df%>%
group_by(yy_hecho) %>%
summarise(n=n())
homicides_per_year <- homicide1df%>%
group_by(yy_hecho) %>%
summarise(n=n())
kidnapping_per_year <- kidnapping1df%>%
group_by(yy_hecho) %>%
summarise(n=n())
recruitment_per_year <- recruitment1df%>%
group_by(yy_hecho) %>%
summarise(n=n())
#datos por grupo
homicides_per_group <- homicide1df %>%
mutate(Grupo = case_when(
grepl("GUE",p_str) ~ "GUERRILLA",
grepl("PARA",p_str) ~ "PARAMILITARES",
grepl("EST",p_str) ~ "ESTADO",
grepl("multiple",p_str) ~ "MULTIPLE",
TRUE ~ "OTRO"
)) %>%
group_by(yy_hecho,Grupo) %>%
summarise(n=n())
kidnapping_per_group <- kidnapping1df %>%
mutate(Grupo = case_when(
grepl("GUE",p_str) ~ "GUERRILLA",
grepl("PARA",p_str) ~ "PARAMILITARES",
grepl("EST",p_str) ~ "ESTADO",
grepl("multiple",p_str) ~ "MULTIPLE",
TRUE ~ "OTRO"
)) %>%
group_by(yy_hecho,Grupo) %>%
summarise(n=n())
View(disappearance1df)
View(homicide1df)
View(kidnapping1df)
kidnapp_homicidie <-merge(homicide1df, kidnapping1df, by = "match_group_id", all = TRUE)
View(kidnapp_homicidie)
idnapp_homicidie <-inner_join(homicide1df, kidnapping1df, by = "match_group_id")
kidnapp_homicidie <-inner_join(homicide1df, kidnapping1df, by = "match_group_id")
rm(idnapp_homicidie)
View(kidnapp_homicidie)
valores_comunes2 <- intersect(homicide1df$match_group_id, kidnapping1df$match_group_id)
View(kidnapping_per_group)
kidnapping_homicide_per_group <- kidnapp_homicidie %>%
mutate(Grupo = case_when(
grepl("GUE",p_str) ~ "GUERRILLA",
grepl("PARA",p_str) ~ "PARAMILITARES",
grepl("EST",p_str) ~ "ESTADO",
grepl("multiple",p_str) ~ "MULTIPLE",
TRUE ~ "OTRO"
)) %>%
group_by(yy_hecho,Grupo) %>%
summarise(n=n())
kidnapping_homicide_per_group <- kidnapp_homicidie %>%
mutate(Grupo = case_when(
grepl("GUE",p_str) ~ "GUERRILLA",
grepl("PARA",p_str) ~ "PARAMILITARES",
grepl("EST",p_str) ~ "ESTADO",
grepl("multiple",p_str) ~ "MULTIPLE",
TRUE ~ "OTRO"
)) %>%
group_by(yy_hecho,Grupo) %>%
summarise(n=n())
View(kidnapp_homicidie)
kidnapping_homicide_per_group <- kidnapp_homicidie %>%
mutate(Grupo = case_when(
grepl("GUE",p_str.x) ~ "GUERRILLA",
grepl("PARA",p_str.x) ~ "PARAMILITARES",
grepl("EST",p_str.x) ~ "ESTADO",
grepl("multiple",p_str.x) ~ "MULTIPLE",
TRUE ~ "OTRO"
)) %>%
group_by(yy_hecho.x,Grupo) %>%
summarise(n=n())
View(kidnapping_homicide_per_group)
